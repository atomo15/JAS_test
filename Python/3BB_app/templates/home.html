<!DOCTYPE html>
<html>

<head>
    <title>Home</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
</head>


<body>
    <nav class="navbar navbar-expand-sm bg-dark navbar-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="http://127.0.0.1:5000/">3BB</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#collapsibleNavbar">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="collapsibleNavbar">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="#">Link</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Link</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Link</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button"
                            data-bs-toggle="dropdown">Dropdown</a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#">Link</a></li>
                            <li><a class="dropdown-item" href="#">Another link</a></li>
                            <li><a class="dropdown-item" href="#">A third link</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid mt-3">
        <center>
            <canvas id="myChart" style="width:100%;max-width:600px"></canvas>
            <canvas id="myChart2" style="width:100%;max-width:600px"></canvas>
        </center>
    </div>

    <script>
        var datajs = {{ data | tojson }};
        var test = {{ test | tojson }};
        console.log(datajs[0])
        console.log(test)
        var xVals = [];
        var yVals = [];
        var barColors = [];
        for (var i = 0; i < datajs.length; i++) {
            barColors[i] = "rgba(" + ((i + 1) * 25) + ",150,0,1)";
            for (var j = 0; j < 2; j++) {
                if (j == 0) {
                    xVals[i] = "Zone " + datajs[i][j];
                } else {
                    yVals[i] = datajs[i][j];
                }
            }
        }
        console.log(xVals);
        console.log(yVals);

        //var xValues = ["Italy", "France", "Spain", "USA", "Argentina"];
        var xValues = xVals;
        //var yValues = [55, 49, 44, 24, 15];
        var yValues = yVals;
        //var barColors = ["red", "green", "blue", "orange", "brown", "red", "green", "blue", "orange", "brown"];

        new Chart("myChart", {
            type: "bar",
            data: {
                labels: xValues,
                datasets: [{
                    backgroundColor: barColors,
                    data: yValues
                }]
            },
            options: {
                legend: { display: false },
                title: {
                    display: true,
                    text: "The Number of Accounts in each zone."
                }
            }
        });
        new Chart("myChart2", {
            type: "doughnut",
            data: {
                labels: xValues,
                datasets: [{
                    backgroundColor: barColors,
                    data: yValues
                }]
            },
            options: {
                title: {
                    display: true,
                    text: "The Number of Accounts in each zone."
                }
            }
        });
    </script>

</body>

</html>